{"version":3,"sources":["webpack://v8/webpack/universalModuleDefinition","webpack://v8/webpack/bootstrap","webpack://v8/./src/Validator.ts","webpack://v8/./src/functions.ts","webpack://v8/./src/validators/Object.ts","webpack://v8/./src/validators/Number.ts","webpack://v8/./src/index.ts","webpack://v8/./src/validators/Any.ts","webpack://v8/./src/validators/Array.ts","webpack://v8/./src/validators/Boolean.ts","webpack://v8/./src/validators/Date.ts","webpack://v8/./src/validators/String.ts","webpack://v8/./src/custom/geo.ts","webpack://v8/./src/custom/express.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","functions_1","Validator","check","parent","getMessage","comparator","getComparator","message","newInstance","constructor","next","triggerFail","path","fail","addItem","isGetMessage","withComparator","reverseComparator","forward","a","b","validate","transform","transformer","done","_a","apply","_b","sent","eval","required","defaults","parsed","parse","isValid","resolve","isEmpty","undefined","optional","is","oneOf","values","_this","findIndex","v","notOneOf","equals","compareTo","lessThan","lessThanEqual","max","greaterThan","greaterThanEqual","between","min","or","getMany","many","length","runAsTuple","pass","updatedValue","json","isString","JSON","e","nullify","remove","set","newValue","encode","encodeURI","encodeComponent","encodeURIComponent","decode","decodeURI","decodeComponent","decodeURIComponent","run","updated","result","items","nextValue","__awaiter","doneValue","failResult","item","push","runAsPromise","Promise","reject","__generator","runAsPromiseItems","x","trim","isFunction","trimIfString","isPlainObject","Array","isArray","toArray","Validator_1","obj","ValidatorObject","_super","properties","__assign","__extends","prop","add","additionalProps","props","overrideProps","validator","valid","validator_1","concat","_c","_d","forEach","instanceOf","type","wrap","int","ValidatorNumber","withParser","parseInt","float","parseFloat","arguments","parser","isFinite","isPositive","isNegative","floor","Math","abs","neg","ceil","round","__export","any","ValidatorAny","arr","ValidatorArray","getTypeComparator","getTypeValidator","element","typeValidators","removeAndIgnoreInvalid","types","requireDivisibleAmount","slice","removing","splice","minLength","maxLength","every","some","reverse","filter","sort","sorter","map","mapper","unique","k","removeDuplicates","bool","ValidatorBoolean","truthy","falsy","test","withTruthy","withFalsy","date","ValidatorDate","Date","getTime","isWeekday","weekdays","indexOf","getDay","isDayOfMonth","dayOfMonths","getDate","isMonth","months","getMonth","endOfDay","setHours","startOfDay","endOfWeek","setDate","startOfWeek","endOfMonth","setMonth","startOfMonth","endOfYear","startOfYear","str","ValidatorString","localeCompare","insensitive","toLowerCase","exists","isLower","isUpper","toUpperCase","like","pattern","unlike","colorHex","allowHash","requireHash","colorShortHex","colorRGB","percent","colorRGBA","color","linkless","uuid","ipv4","ipv6","ip","isbn","phoneUS","zipUS","alphaNumeric","alpha","token","hex","base64","http","https","url","requireProtocol","email","creditCard","replace","replacement","truncate","substring","ltrim","rtrim","lower","upper","strip","normalizeEmail","PLUS_ONLY","PLUS_AND_DOT","normalizeableProviders","gmail.com","cut","googlemail.com","aliasOf","hotmail.com","live.com","outlook.com","emailParts","split","username","domain","Object_1","Number_1","geo","latitude","longitude","coordinates","getRouteHandler","source","onFailure","validators","request","response","failures"],"mappings":"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","file":"valid8or.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"v8\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"v8\"] = factory();\n\telse\n\t\troot[\"v8\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","\nimport { Check, GetMessage, Comparator, Value, Next, Done, Fail, Tuple, ResultFor, Item } from './types';\nimport { isGetMessage, resolve, isEmpty, isString } from './functions';\n\n\nexport abstract class Validator<T>\n{\n\n  public parent?: this;\n  public check: Check<T>;\n  public getMessage: GetMessage<T>;\n  public comparator: Comparator<T>;\n\n  public constructor (check: Check<T>, parent?: Validator<T>, getMessage?: GetMessage<T>)\n  {\n    this.check = check;\n    this.parent = parent as this;\n    this.comparator = this.getComparator.bind(this);\n    this.message(getMessage || 'invalid')\n  }\n\n  protected abstract getComparator (a: T, b: T): number;\n\n  protected abstract parse (value: any): any;\n\n  protected abstract isValid (parsed: any, value: any): parsed is T;\n\n  protected newInstance (): this\n  {\n    return new (<any>this.constructor)((value: T, next: Next<T>) => next(value));\n  }\n\n  protected triggerFail(value: any, path: (string | number)[], fail: Fail<any>, addItem: (item: Item) => void): void\n  {\n    const message = this.getMessage(value);\n\n    addItem({ value, path, message: message as any });\n    fail(message, path);\n  }\n\n  public message (getMessage: GetMessage<T> | string): this\n  {\n    this.getMessage = isGetMessage<T>(getMessage) \n      ? getMessage \n      : ((() => getMessage) as unknown as GetMessage<T>);\n    return this;\n  }\n\n  public withComparator (comparator: Comparator<T>): this\n  {\n    this.comparator = comparator;\n    return this;\n  }\n\n  public reverseComparator (): this\n  {\n    const forward = this.comparator;\n    this.comparator = (a, b) => forward(b, a);\n    return this;\n  }\n\n  public validate<VT = T> (check: Check<VT>): this\n  {\n    return new (<any>this.constructor)(check, this);\n  }\n\n  public transform<R, V extends Validator<R>> (transformer: (value: T) => R | Promise<R>): V\n  {\n    return this.validate(async function (this: V, value, next, done, fail) \n    {\n      return next(await transformer.call(this, value) as unknown as T)\n\n    }) as unknown as V;\n  }\n\n  public eval (required: Value<boolean>, defaults?: Value<T>): this\n  {\n    type V = this;\n\n    return this.validate(async function (this: V, value, next, done, fail, path, addItem) \n    {\n      const parsed = this.parse(value);\n\n      if (!this.isValid(parsed, value)) \n      {\n        if (resolve(required)) \n        {\n          if (isEmpty(value) && defaults !== undefined) \n          {\n            done(resolve(defaults));\n          } \n          else \n          {\n            this.triggerFail(value, path, fail, addItem);\n          }\n        } \n        else \n        {\n          if (defaults !== undefined) \n          {\n            done(resolve(defaults));\n          } \n          else \n          {\n            done(value);\n          }\n        }\n      } \n      else \n      {\n        await next(parsed);\n      }\n    }).message('check');\n  }\n\n  public required (defaults?: Value<T>): this\n  {\n    return this.eval(true, defaults).message('required');\n  }\n\n  public optional (defaults?: Value<T>): this\n  {\n    return this.eval(false, defaults).message('optional');\n  }\n\n  public is (check: (value: T) => boolean | Promise<boolean>): this\n  {\n    type V = this;\n\n    return this.validate(async function (this: V, value, next, done, fail, path, addItem) \n    {\n      if (!(await check(value))) \n      {\n        this.triggerFail(value, path, fail, addItem);\n      } \n      else \n      {\n        await next(value);\n      }\n    });\n  }\n\n  public oneOf (values: Value<T[]>): this\n  {\n    return this.is(value => resolve(values).findIndex(v => this.comparator(value, v) === 0) !== -1).message('oneOf');\n  }\n\n  public notOneOf (values: Value<T[]>): this\n  {\n    return this.is(value => resolve(values).findIndex(v => this.comparator(value, v) === 0) === -1).message('notOneOf');\n  }\n\n  public equals (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) === 0).message('equals');\n  }\n\n  public lessThan (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) < 0).message('lessThan');\n  }\n\n  public lessThanEqual (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) <= 0).message('lessThanEqual');\n  }\n\n  public max (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) <= 0).message('max');\n  }\n\n  public greaterThan (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) > 0).message('greaterThan');\n  }\n\n  public greaterThanEqual (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) >= 0).message('greaterThanEqual');\n  }\n\n  public between (min: Value<T>, max: Value<T>): this\n  {\n    return this.is(value => \n      this.comparator(value, resolve(min)) >= 0 && \n      this.comparator(value, resolve(max)) <= 0).message('between');\n  }\n\n  public min (compareTo: Value<T>): this\n  {\n    return this.is(value => this.comparator(value, resolve(compareTo)) >= 0).message('min');\n  }\n\n  public fail(): this\n  {\n    type V = this;\n\n    return this.validate(async function (this: V, value, next, done, fail, path, addItem) \n    {\n      this.triggerFail(value, path, fail, addItem);\n    });\n  }\n\n  public or (getMany: (validator: this) => this[]): this\n  {\n    type V = this;\n\n    return this.validate(async function (this: V, value, next, done, fail, path, addItem) \n    {\n      const root = this.newInstance();\n      const many = getMany(root);\n\n      for (let i = 0; i < many.length; i++) \n      {\n        const [pass, updatedValue] = await many[i].runAsTuple(value, path);\n\n        if (pass && updatedValue !== undefined)\n        {\n          return await next(updatedValue);\n        }\n      }\n\n      this.triggerFail(value, path, fail, addItem);\n    });\n  }\n\n  public json (): this\n  {\n    return this.transform(value => \n    {\n      if (isString(value)) \n      {\n        try {\n          value = JSON.parse(value);\n        } catch (e) {}\n      }\n\n      return value;\n    });\n  }\n\n  public nullify (): this\n  {\n    return this.transform(value => null) as any;\n  }\n\n  public remove (): this\n  {\n    return this.transform(value => undefined) as any;\n  }\n\n  public set (newValue: Value<T>): this\n  {\n    return this.transform(value => resolve(newValue));\n  }\n\n  public encode (): this\n  {\n    return this.transform(value => isString(value) ? encodeURI(value) : value);\n  }\n\n  public encodeComponent (): this\n  {\n    return this.transform(value => isString(value) ? encodeURIComponent(value) : value);\n  }\n\n  public decode (): this\n  {\n    return this.transform(value => isString(value) ? decodeURI(value) : value);\n  }\n\n  public decodeComponent (): this\n  {\n    return this.transform(value => isString(value) ? decodeURIComponent(value) : value);\n  }\n\n  public async run (value: any, next: Next<T>, done: Done<T>, fail: Fail<T>, path: (string | number)[] = [], addItem: (item: Item) => void): Promise<void>\n  {\n    if (this.parent) \n    {\n      await this.parent.run(value, (newValue) => this.check(newValue, next, done, fail, path, addItem), done, fail, path, addItem);\n    }\n    else\n    {\n      await this.check(value, next, done, fail, path, addItem);\n    }\n  }\n\n  public async runAsTuple (value: any, path: (string | number)[] = []): Promise<Tuple<T>>\n  {\n    let pass = true;\n    let updated: T | undefined = undefined;\n    let result: ResultFor<T> | undefined = undefined;\n    const items: Item[] = [];\n\n    await this.run(value, \n      async (nextValue)  => {\n        updated = nextValue;\n      },\n      (doneValue) => {\n        updated = doneValue;\n      },\n      (failResult) => {\n        result = failResult;\n        pass = false;\n      },\n      path,\n      (item) => {\n        items.push(item);\n        pass = false;\n      },\n    );\n\n    return [pass, updated, result, items];\n  }\n\n  public async runAsPromise (value: any): Promise<T>\n  {\n    return new Promise<T>((resolve, reject) => \n    {\n      this.run(value, async(value) => resolve(value), resolve, reject, [], () => {});\n    });\n  }\n\n  public async runAsPromiseItems (value: any): Promise<T>\n  {\n    return new Promise<T>((resolve, reject) => \n    {\n      const items: Item[] = [];\n\n      this.run(value, async(value) => resolve(value), resolve, () => reject(items), [], (item) => items.push(item));\n    });\n  }\n  \n}","\nimport { GetMessage, Value } from './types';\n\n\nexport function isGetMessage<T> (x: any): x is GetMessage<T>\n{\n  return isFunction(x);\n}\n\nexport function resolve<T> (value: Value<T>): T\n{\n  return isFunction(value) ? value() : value;\n}\n\nexport function trimIfString (x: any): any\n{\n  return isString(x) ? x.trim() : x;\n}\n\nexport function isString (x: any): x is string\n{\n  return typeof x === 'string';\n}\n\nexport function isEmpty (x: any): boolean\n{\n  return isString(x) \n    ? x.trim().length === 0 \n    : (x === undefined || x === null);\n}\n\nexport function isPlainObject (x: any): boolean\n{\n  return x !== null && !Array.isArray(x) && typeof x === 'object';\n}\n\nexport function isFunction (x: any): x is Function\n{\n  return typeof x === 'function';\n}\n\nexport function toArray<T> (x: T | T[]): T[]\n{\n  return Array.isArray(x) ? x : (isEmpty(x) ? [] : [x]);\n}\n","\nimport { Validator } from '../Validator';\nimport { isPlainObject } from '../functions';\nimport { ResultObject, ResultFor, MergeObjects, GetMessage, Check } from '../types';\n\n\nexport type ValidatorMap<T> = \n{\n  [P in keyof T]?: Validator<T[P]> \n};\n\nexport function obj<T extends object = {}> (): ValidatorObject<T>\n{\n  return new ValidatorObject<T>(async (value, next) => next(value));\n}\n\nexport class ValidatorObject<T extends object> extends Validator<T>\n{\n\n  public properties?: ValidatorMap<T>;\n\n  public constructor (check: Check<T>, parent?: Validator<T>, getMessage?: GetMessage<T>)\n  {\n    super(check, parent, getMessage);\n\n    if (parent instanceof ValidatorObject && parent.properties)\n    {\n      this.properties = { ...(parent as ValidatorObject<T>).properties };\n    }\n  }\n  \n  protected parse (value: any): any\n  {\n    return value;\n  }\n\n  protected isValid(parsed: any, value: any): parsed is T\n  {\n    return isPlainObject(parsed);\n  }\n\n  protected getComparator (a: T, b: T): number\n  {\n    // a > b\n    for (let prop in a) \n    {\n      if (!(prop in b)) \n      {\n        return 1;\n      }\n    }\n\n    // a < b\n    for (let prop in b) \n    {\n      if (!(prop in a)) \n      {\n        return -1;\n      }\n    }\n    \n    // a = b\n    return 0;\n  }\n\n  public add<P extends object = {}>(additionalProps: ValidatorMap<P>): ValidatorObject<MergeObjects<T, P>>\n  {\n    const props = { \n      ...this.properties,\n      ...additionalProps,\n    };\n\n    return this.props(props) as any;\n  }\n\n  public props<P extends object = {}>(overrideProps: ValidatorMap<P>): ValidatorObject<P>\n  {\n    const validator = this.validate<P>(async function (this: ValidatorObject<P>, value, next, done, fail, path, addItem) \n    {\n      const props = this.properties;\n      const result: ResultObject<P> = {};\n      let valid = true;\n\n      for (let prop in props) \n      {\n        const validator = props[prop];\n\n        if (!validator) \n        {\n          continue;\n        }\n\n        const [pass, updatedValue, failResult, items] = await validator.runAsTuple(value[prop], path.concat([prop]));\n\n        if (pass)\n        {\n          if (updatedValue !== undefined) \n          {\n            value[prop] = updatedValue;\n          } \n          else \n          {\n            delete value[prop];\n          }\n        }\n        else\n        {\n          items.forEach(addItem);\n\n          result[prop] = failResult;\n          valid = false;\n        }\n      }\n\n      if (valid) \n      {\n        await next(value);\n      } \n      else \n      {\n        fail(result as ResultFor<P>, path);\n      }\n    }) as any;\n\n    validator.properties = overrideProps;\n\n    return validator;\n  }\n\n  public instanceOf (type: new (...args: any[]) => T): this\n  {\n    return this.is(value => value instanceof type).message('instanceOf');\n  }\n\n  public wrap<O extends object = T> (type: new (value: T) => O): ValidatorObject<O>\n  {\n    return this.transform(value => new type(value));\n  }\n\n}","\nimport { Validator } from '../Validator'\nimport { trimIfString, isEmpty } from '../functions';\n\n\nexport function int<N extends number = number>(): ValidatorNumber<N>\n{\n  return new ValidatorNumber<N>(async (value, next) => next(value)).withParser(parseInt);\n}\n\nexport function float<N extends number = number>(): ValidatorNumber<N>\n{\n  return new ValidatorNumber<N>(async (value, next) => next(value)).withParser(parseFloat);\n}\n\nexport class ValidatorNumber<N extends number = number> extends Validator<N>\n{\n  \n  public parser: (value: any) => number = parseFloat;\n\n  protected parse (value: any): any\n  {\n    return isEmpty(value) ? value : this.parser(trimIfString(value));\n  }\n\n  protected isValid (parsed: any, value: any): parsed is N\n  {\n    return typeof parsed === 'number' && isFinite(parsed);\n  }\n\n  protected getComparator (a: number, b: number): number\n  {\n    return a - b;\n  }\n\n  public withParser(parser: (value: any) => number): this\n  {\n    this.parser = parser;\n\n    return this;\n  }\n\n  public isPositive (): this\n  {\n    return this.is(value => value >= 0).message('isPositive');\n  }\n\n  public isNegative (): this\n  {\n    return this.is(value => value < 0).message('isNegative');\n  }\n  \n  public floor (): this\n  {\n    return this.transform(value => Math.floor(value));\n  }\n  \n  public abs (): this\n  {\n    return this.transform(value => Math.abs(value));\n  }\n  \n  public neg (): this\n  {\n    return this.transform(value => -value);\n  }\n\n  public ceil (): this\n  {\n    return this.transform(value => Math.ceil(value));\n  }\n\n  public round (): this\n  {\n    return this.transform(value => Math.round(value));\n  }\n\n}","\nexport * from './types';\nexport * from './functions';\n\nexport * from './Validator';\nexport * from './validators/Any';\nexport * from './validators/Array';\nexport * from './validators/Boolean';\nexport * from './validators/Date';\nexport * from './validators/Number';\nexport * from './validators/Object';\nexport * from './validators/String';\n\nexport * from './custom/geo';\nexport * from './custom/express';","\nimport { Validator } from '../Validator';\n\n\nexport function any(): ValidatorAny\n{\n  return new ValidatorAny(async (value, next) => next(value));\n}\n\nexport class ValidatorAny extends Validator<any>\n{\n\n  protected parse (value: any): any\n  {\n    return value;\n  }\n\n  protected isValid(parsed: any, value: any): parsed is any\n  {\n    return parsed !== undefined;\n  }\n\n  protected getComparator (a: any, b: any): number\n  {\n    return 0;\n  }\n  \n}\n","\nimport { Validator } from '../Validator';\nimport { toArray, isEmpty, resolve } from '../functions';\nimport { Comparator, Value, ResultFor, Check } from '../types';\n\n\nexport function arr<T extends any[] = unknown[]> (): ValidatorArray<T>\n{\n  return new ValidatorArray<T>(async (value, next) => next(value));\n}\n\nexport type ValidatorTupleTypes<T extends any[]> = {\n  [I in keyof T]: T[I] extends { check: Check<infer R> } ? R : unknown\n};\n\nexport type ValidatorForTypes<T extends Validator<any>[]> = {\n  [I in keyof T]: Validator<T[I]>\n};\n\nexport class ValidatorArray<T extends any[]> extends Validator<T>\n{\n\n  private typeValidators?: Validator<T[number]>[];\n\n  protected parse (value: any): any\n  {\n    return isEmpty(value) ? value : toArray(value);\n  }\n\n  protected isValid (parsed: any, value: any): parsed is T\n  {\n    return Array.isArray(parsed);\n  }\n\n  protected getComparator (a: T, b: T): number\n  { \n    const d = a.length - b.length;\n\n    if (d !== 0) \n    {\n      return d;\n    }\n    \n    for (let i = 0; i < a.length; i++) \n    {\n      const comparator = this.getTypeComparator(i);\n\n      if (!comparator) \n      { \n        throw 'Cannot compare arrays before a type with a comparator is specified';\n      }\n\n      const r = comparator(a[i], b[i]);\n\n      if (r !== 0) \n      {\n        return r;\n      }\n    }\n    \n    return 0;\n  }\n\n  public getTypeValidator (element: number): Validator<T> | undefined\n  {\n    if (this.typeValidators) \n    {\n      return this.typeValidators[element % this.typeValidators.length];\n    }\n\n    if (this.parent && this.parent.getTypeValidator) \n    {\n      return this.parent.getTypeValidator(element);\n    }\n  }\n\n  public getTypeComparator (element: number): Comparator<T> | undefined\n  {\n    const validator = this.getTypeValidator(element);\n\n    if (validator) \n    {\n      return validator.comparator;\n    }\n  }\n\n  public type<E> (type: Validator<E>, removeAndIgnoreInvalid: boolean = false): ValidatorArray<E[]>\n  {\n    return this.types([type], false, removeAndIgnoreInvalid) as any as ValidatorArray<E[]>;\n  }\n\n  public types<E extends any[]> (types: ValidatorForTypes<E>, requireDivisibleAmount: boolean = true, removeAndIgnoreInvalid: boolean = false): ValidatorArray<E>\n  {\n    return this.validate<E>(async function (this: ValidatorArray<E>, value, next, done, fail, path, addItem) \n    {\n      this.typeValidators = types;\n\n      if (requireDivisibleAmount && value.length % types.length !== 0)\n      {\n        this.triggerFail(value, path, fail, addItem);\n\n        return;\n      }\n\n      const result: any[] = [];\n      const newValue = value.slice() as E;\n      let removing: number[] = [];\n      let valid: boolean = true;\n\n      for (let i = 0; i < value.length; i++) \n      {\n        const [pass, updatedValue, failResult, items] = await types[i % types.length].runAsTuple(value[i], path.concat([i]));\n\n        if (pass) \n        {\n          newValue[i] = updatedValue;\n        } \n        else \n        {\n          items.forEach(addItem);\n\n          if (removeAndIgnoreInvalid) \n          {\n            removing.push(i);\n          } \n          else \n          {\n            result[i] = failResult;\n            valid = false;\n          }\n        }\n      }\n\n      if (valid) \n      {\n        if (removing.length > 0) \n        {\n          for (let i = removing.length - 1; i >= 0; i--) \n          {\n            newValue.splice(removing[i], 1);\n          }\n        }\n\n        await next(newValue);\n      } \n      else \n      {\n        fail(result as ResultFor<E>, path);\n      }\n    }) as any;\n  }\n\n  public minLength (min: Value<number>): this\n  {\n    return this.is(value => value.length >= resolve(min)).message('minLength');\n  }\n\n  public maxLength (max: Value<number>): this\n  {\n    return this.is(value => value.length <= resolve(max)).message('maxLength');\n  }\n\n  public every (every: (item: T, index: number, all: T[]) => boolean): this\n  {\n    return this.is(value => value.every(every)).message('every');\n  }\n\n  public some (some: (item: T, index: number, all: T[]) => boolean): this\n  {\n    return this.is(value => value.some(some)).message('some');\n  }\n\n  public reverse (): this\n  {\n    return this.transform(value => value.slice().reverse());\n  }\n\n  public filter (filter: (item: T, index: number, all: T[]) => boolean): this\n  {\n    return this.transform(value => value.filter(filter));\n  }\n\n  public sort (sorter?: Comparator<T>): this\n  {\n    type V = this;\n\n    return this.transform(function(this: V, value) \n    {\n      if (!sorter)\n      {\n        sorter = this.getTypeComparator(0);\n      }\n\n      return value.slice().sort(sorter)\n    });\n  }\n\n  public map<M> (mapper: (item: T[number]) => M): ValidatorArray<M[]>\n  {\n    return this.transform<M[], ValidatorArray<M[]>>(value => value.map(mapper));\n  }\n\n  public unique (comparator?: Comparator<T>): this\n  {\n    type V = this;\n\n    return this.is(function(this: V, value) \n    {\n      if (!comparator && !(comparator = this.getTypeComparator(0))) \n      {\n        throw 'Cannot ensure unique values when a type or comparator has not been specified';\n      }\n\n      for (let i = 0; i < value.length - 1; i++) \n      {\n        for (let k = 1; k < value.length; k++) \n        {\n          if (comparator(value[i], value[k]) === 0) \n          {\n            return false;\n          }\n        }\n      }\n\n      return true;\n\n    }).message('unique');\n  }\n\n  public removeDuplicates (comparator?: Comparator<T>): this\n  {\n    type V = this;\n\n    return this.transform(function (this: V, value) \n    {\n      if (!comparator && !(comparator = this.getTypeComparator(0))) \n      {\n        throw 'Cannot remove duplicate values when a type or comparator has not been specified';\n      }\n\n      const newValue = value.slice();\n\n      for (let i = 0; i < newValue.length - 1; i++) \n      {\n        for (let k = i + 1; k < newValue.length; k++) \n        {\n          if (comparator(newValue[i], newValue[k]) === 0) \n          {\n            newValue.splice(k--, 1);\n          }\n        }\n      }\n\n      return newValue;\n    });\n  }\n\n}","\nimport { Validator } from '../Validator';\n\n\nexport function bool(): ValidatorBoolean\n{\n  return new ValidatorBoolean(async (value, next) => next(value));\n}\n\nexport class ValidatorBoolean extends Validator<boolean>\n{\n  \n  private truthy: RegExp = /^(true|1|yes|y)$/i;\n  private falsy: RegExp = /^(false|0|no|n)$/i;\n\n  protected parse (value: any): any\n  {\n    return this.truthy.test(value + '') \n      ? true\n      : this.falsy.test(value + '')\n        ? false\n        : value\n    ;\n  }\n\n  protected isValid (parsed: any, value: any): parsed is boolean\n  {\n    return typeof parsed === 'boolean';\n  }\n\n  protected getComparator (a: boolean, b: boolean): number\n  {\n    return (a ? 1 : 0) - (b ? 1 : 0);\n  }\n\n  public withTruthy (truthy: RegExp): this\n  {\n    this.truthy = truthy;\n    \n    return this;\n  }\n\n  public withFalsy (falsy: RegExp): this\n  {\n    this.falsy = falsy;\n\n    return this;\n  }\n\n}\n","\nimport { Validator } from '../Validator';\nimport { Value } from '../types';\nimport { resolve } from '../functions';\nimport { ValidatorNumber } from './Number';\n\n\nexport function date(): ValidatorDate\n{\n  return new ValidatorDate(async (value, next) => next(value));\n}\n\nexport class ValidatorDate extends Validator<Date>\n{\n\n  protected parse (value: any): any\n  {\n    return new Date(value);\n  }\n\n  protected isValid (parsed: any, value: any): parsed is Date\n  {\n    return parsed instanceof Date && isFinite(parsed.getTime());\n  }\n\n  protected getComparator (a: Date, b: Date): number\n  {\n    return a.getTime() - b.getTime();\n  }\n\n  public isWeekday (weekdays: Value<number[]>): this\n  {\n    return this.is(value => resolve(weekdays).indexOf(value.getDay()) !== -1).message('isWeekday');\n  }\n\n  public isDayOfMonth (dayOfMonths: Value<number[]>): this\n  {\n    return this.is(value => resolve(dayOfMonths).indexOf(value.getDate()) !== -1).message('isDayOfMonth');\n  }\n\n  public isMonth (months: Value<number[]>): this\n  {\n    return this.is(value => resolve(months).indexOf(value.getMonth()) !== -1).message('isMonth');\n  }\n\n  public endOfDay (): this\n  {\n    return this.transform(value => \n    {\n      value.setHours(23, 59, 59, 999);\n      return value;\n    });\n  }\n\n  public startOfDay (): this\n  {\n    return this.transform(value => \n    {\n      value.setHours(0, 0, 0, 0);\n      return value;\n    });\n  }\n\n  public endOfWeek (): this\n  {\n    return this.transform(value => \n    {\n      value.setDate(value.getDate() + (6 - value.getDay()));\n      return value;\n    });\n  }\n\n  public startOfWeek (): this\n  {\n    return this.transform(value => \n    {\n      value.setDate(value.getDate() - value.getDay());\n      return value;\n    });\n  }\n\n  public endOfMonth (): this\n  {\n    return this.transform(value => \n    {\n      value.setMonth(value.getMonth() + 1, 0);\n      return value;\n    });\n  }\n\n  public startOfMonth (): this\n  {\n    return this.transform(value => \n    {\n      value.setDate(1);\n      return value;\n    });\n  }\n\n  public endOfYear (): this\n  {\n    return this.transform(value => \n    {\n      value.setMonth(12, 0);\n      return value;\n    });\n  }\n\n  public startOfYear (): this\n  {\n    return this.transform(value => \n    {\n      value.setMonth(0, 1);\n      return value;\n    });\n  }\n\n  public getTime (): ValidatorNumber\n  {\n    return this.transform<number, ValidatorNumber>(value => value.getTime());\n  }\n\n}\n","\nimport { isString, resolve } from '../functions';\nimport { Validator } from '../Validator';\nimport { Value } from '../types';\n\n\nexport function str<S extends string = string>(): ValidatorString<S>\n{\n  return new ValidatorString<S>(async (value, next) => next(value));\n}\n\nexport class ValidatorString<S extends string = string> extends Validator<S>\n{\n\n  protected parse (value: any): any\n  {\n    return value === undefined || value === null ? value : (value + '');\n  }\n\n  protected isValid (parsed: any, value: any): parsed is S\n  {\n    return isString(parsed);\n  }\n\n  protected getComparator (a: string, b: string): number\n  {\n    return a.localeCompare(b);\n  }\n\n  public insensitive (): this\n  {\n    return this.withComparator((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()));\n  }\n\n  public exists (): this\n  {\n    return this.is(value => value.length > 0).message('exists');\n  }\n\n  public isLower (): this\n  {\n    return this.is(value => value.toLowerCase() === value).message('isLower');\n  }\n\n  public isUpper (): this\n  {\n    return this.is(value => value.toUpperCase() === value).message('isUpper');\n  }\n\n  public like (pattern: Value<RegExp>): this\n  {\n    return this.is(value => resolve(pattern).test(value)).message('like');\n  }\n\n  public unlike (pattern: Value<RegExp>): this\n  {\n    return this.is(value => !resolve(pattern).test(value)).message('unlike');\n  }\n\n  public minLength (min: Value<number>): this\n  {\n    return this.is(value => value.length >= resolve(min)).message('minLength');\n  }\n\n  public maxLength (max: Value<number>): this\n  {\n    return this.is(value => value.length <= resolve(max)).message('maxLength');\n  }\n  \n  public colorHex (allowHash: boolean = true, requireHash: boolean = false): this\n  {\n    return this.like(allowHash\n      ? requireHash \n        ? /^#[0-9a-f]{6}$/i\n        : /^#?[0-9a-f]{6}$/i\n      : /^[0-9a-f]{6}$/i\n    ).message('colorHex');\n  }\n\n  public colorShortHex (allowHash: boolean = true, requireHash: boolean = false): this\n  {\n    return this.like(allowHash\n      ? requireHash \n        ? /^#[0-9a-f]{3}$/i\n        : /^#?[0-9a-f]{3}$/i\n      : /^[0-9a-f]{3}$/i\n    ).message('colorShortHex');\n  }\n\n  public colorRGB (percent: boolean = false): this\n  {\n    return this.like(percent\n      ? /^rgb\\s*\\(\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|\\d\\s*%|[1-9]\\d\\s*%|100\\s*%)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|\\d\\s*%|[1-9]\\d\\s*%|100\\s*%)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|\\d\\s*%|[1-9]\\d\\s*%|100\\s*%)\\s*\\)$/i\n      : /^rgb\\s*\\(\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\s*\\)$/i\n    ).message('colorRGB');\n  }\n\n  public colorRGBA (percent: boolean = false): this\n  {\n    return this.like(percent\n      ? /^rgba\\s*\\(\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|\\d\\s*%|[1-9]\\d\\s*%|100\\s*%)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|\\d\\s*%|[1-9]\\d\\s*%|100\\s*%)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|\\d\\s*%|[1-9]\\d\\s*%|100\\s*%)\\s*,\\s*[01]?\\.?\\d*\\s*\\)$/i\n      : /^rgba\\s*\\(\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\s*,\\s*(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\s*,\\s*[01]?\\.?\\d*\\s*\\)$/i\n    ).message('colorRGBA');\n  }\n\n  public color (percent: boolean = false, allowHash: boolean = true, requireHash: boolean = false): this\n  {\n    return this.or(v => [\n      v.colorHex(allowHash, requireHash),\n      v.colorShortHex(allowHash, requireHash),\n      v.colorRGB(percent),\n      v.colorRGBA(percent)\n    ]).message('color');\n  }\n\n  public linkless (): this\n  {\n    return this.unlike(/(\\.|dot)\\s*([a-zA-Z]{2}|aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel)/i).message('linkless');\n  }\n\n  public uuid (): this\n  {\n    return this.like(/^[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}$/).message('uuid');\n  }\n\n  public ipv4 (): this\n  {\n    return this.like(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/).message('ipv4');\n  }\n\n  public ipv6 (): this\n  {\n    return this.like(/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/).message('ipv6');\n  }\n\n  public ip (): this\n  {\n    return this.or(v => [v.ipv4(), v.ipv6()]).message('ip');\n  }\n\n  public isbn (): this\n  {\n    return this.like(/^(ISBN\\s)?(?=[-0-9xX ]{13}$)(?:[0-9]+[- ]){3}[0-9]*[xX0-9]$/).message('isbn');\n  }\n\n  public phoneUS (): this\n  {\n    return this.like(/^\\D?(\\d{3})\\D?\\D?(\\d{3})\\D?(\\d{4})$/).message('phoneUS');\n  }\n\n  public zipUS (): this\n  {\n    return this.like(/^\\d{5}$|^\\d{5}-\\d{4}$/).message('zipUS');\n  }\n\n  public alphaNumeric (): this\n  {\n    return this.like(/^[a-zA-Z0-9]*$/).message('alphaNumeric');\n  }\n\n  public alpha (): this\n  {\n    return this.like(/^[a-zA-Z]*$/).message('alpha');\n  }\n\n  public token (): this\n  {\n    return this.like(/^\\w*$/).message('token');\n  }\n\n  public hex (): this\n  {\n    return this.like(/^[0-9a-f]$/i).message('hex');\n  }\n\n  public base64 (): this\n  {\n    return this.like(/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/).message('base64');\n  }\n\n  public http (): this\n  {\n    return this.like(/http:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/).message('http');\n  }\n\n  public https (): this\n  {\n    return this.like(/https:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/).message('https');\n  }\n\n  public url (requireProtocol = false): this\n  {\n    return (requireProtocol \n      ? this.or(v => [v.http(), v.https()])\n      : this.like(/(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/)\n    ).message('url');\n  }\n  \n  public email (): this\n  {\n    return this.like( /^[-!#$%&'*+\\/0-9=?A-Z^_a-z{|}~](\\.?[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/).message('email');\n  }\n\n  public creditCard (): this\n  {\n    return this.like(/^(?:4[0-9]{12}(?:[0-9]{3})?|(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\\d{3})\\d{11})$/).message('creditCard');\n  }\n\n  public replace (pattern: Value<RegExp>, replacement: Value<string>): this\n  {\n    return this.transform(value => value.replace(resolve(pattern), resolve(replacement)));\n  }\n\n  public truncate (maxLength: number): this\n  {\n    return this.transform(value => value.length <= maxLength ? value : value.substring(0, maxLength));\n  }\n\n  public trim (): this\n  {\n    return this.transform(value => value.trim());\n  }\n\n  public ltrim (): this\n  {\n    return this.transform(value => value.replace(/^\\s+/, ''));\n  }\n\n  public rtrim (): this\n  {\n    return this.transform(value => value.replace(/\\s+$/, ''));\n  }\n\n  public lower (): this\n  {\n    return this.transform(value => value.toLowerCase());\n  }\n\n  public upper (): this\n  {\n    return this.transform(value => value.toUpperCase());\n  }\n\n  public strip (pattern: RegExp): this\n  {\n    return this.transform(value => value.replace(pattern, ''));\n  }\n\n  public normalizeEmail (): this\n  {\n    const PLUS_ONLY = /\\+.*$/;\n    const PLUS_AND_DOT = /\\.|\\+.*$/g;\n    const normalizeableProviders: any = {\n      'gmail.com': {\n        'cut': PLUS_AND_DOT\n      },\n      'googlemail.com': {\n        'cut': PLUS_AND_DOT,\n        'aliasOf': 'gmail.com'\n      },\n      'hotmail.com': {\n        'cut': PLUS_ONLY\n      },\n      'live.com': {\n        'cut': PLUS_AND_DOT\n      },\n      'outlook.com': {\n        'cut': PLUS_ONLY\n      }\n    };\n\n    return this.transform(value => \n    {\n      var email = value.toLowerCase();\n      var emailParts = email.split(/@/);\n\n      if (emailParts.length !== 2) {\n        return value;\n      }\n\n      var username = emailParts[0];\n      var domain = emailParts[1];\n\n      if (normalizeableProviders[domain]) {\n        if (normalizeableProviders[domain]['cut']) {\n          username = username.replace(normalizeableProviders[domain].cut, '');\n        }\n        if (normalizeableProviders[domain]['aliasOf']) {\n          domain = normalizeableProviders[domain].aliasOf;\n        }\n      }\n\n      return username + '@' + domain;\n    });\n  }\n\n}","\nimport { Value } from '../types';\nimport { ValidatorObject, obj } from '../validators/Object';\nimport { float } from '../validators/Number';\n\n\nexport type GeoInput = {\n  latitude: number;\n  longitude: number;\n};\n\nexport type GeoOutput = {\n  type: 'Point',\n  coordinates: [number, number]\n};\n\nexport function geo(required: Value<boolean>): ValidatorObject<GeoOutput>\n{\n  return obj<GeoInput>().decodeComponent().json().eval(required).props({\n    latitude: float()\n      .required().message('Latitude is required')\n      .between(-90, 90).message(v => `Latitude must be between -90 and 90 degrees: ${v}`),\n    longitude: float()\n      .required().message('Longitude is required')\n      .between(-180, 180).message(v => `Longitude must be between -180 and 180 degrees: ${v}`)\n  }).transform(({latitude, longitude}) => ({\n    type: 'Point',\n    coordinates: [longitude, latitude]\n  }));\n}\n","\nimport { obj, ValidatorMap } from '../validators/Object';\nimport { ResultFor } from '../types';\n\nexport function getRouteHandler<Request, Response> (source: keyof Request, onFailure: (result: ResultFor<object>, request: Request, response: Response, next: () => void) => void)\n{\n  return function<T extends object = any> (validators: ValidatorMap<T>)\n  {\n    const validator = obj<T>().json().required().props(validators);\n\n    return async (request: Request, response: Response, next: () => void) =>\n    {\n      const [pass, result, failures] = await validator.runAsTuple(request[source]);\n      \n      if (!pass && failures !== undefined)\n      {\n        onFailure(failures, request, response, next);\n      }\n      else\n      {\n        next();\n      }\n    };\n  }\n}\n"],"sourceRoot":""}